<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/><title>LDAP search engines, Part 2: Adding a scoring system</title><meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<link rel="schema.DC" href="http://purl.org/DC/elements/1.0/" />
<link rel="SHORTCUT ICON" href="http://www.ibm.com/favicon.ico" />
<meta name="Owner" content="dW Information/Raleigh/IBM" />
<meta name="DC.Language" scheme="rfc1766" content="en-US" />
<meta name="IBM.Country" content="ZZ" />
<meta name="Security" content="Public" />
<!-- <meta name="IBM.SpecialPurpose" content="SP001" />
<meta name="IBM.PageAttributes" content="sid=1003"/> -->
<meta name="Source" content="Based on v14 Template Generator, Template 14"/>
<meta name="Abstract" content="Learn how to add a scoring system to the search engine described in 'LDAP search engines, Part 1.' Develop your own metaphone-matching techniques for spelling corrections, query suggestions, and effective display of search results." /><meta name="Description" content="Learn how to add a scoring system to the search engine described in 'LDAP search engines, Part 1.' Develop your own metaphone-matching techniques for spelling corrections, query suggestions, and effective display of search results.f
      " /><meta name="Keywords" content="Perl, LDAP, text processing, regular expressions, open source, Nathan Harrington, tttosca" /><meta name="DC.Date" scheme="iso8601" content="2007-03-20" /><meta name="DC.Type" scheme="IBM_ContentClassTaxonomy" content="CT316" /><meta name="DC.Subject" scheme="IBM_SubjectTaxonomy" content="" /><meta name="DC.Rights" content="Copyright (c) 2007 by IBM Corporation" /> <meta name="Robots" content="index,follow" /><meta name="IBM.Effective" scheme="W3CDTF" content="2007-03-20" /><meta name="Last update" content="20032007krjones@us.ibm.com" /><!-- STYLESHEETS/SCRIPTS -->
<!-- for tables -->
<link rel="stylesheet" type="text/css" media="screen,print" href="//www.ibm.com/common/v14/table.css" /> 
<!-- end for tables -->
<script language="JavaScript" src="/developerworks/js/dwcss14.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="//www.ibm.com/common/v14/main.css" />
<link rel="stylesheet" type="text/css" media="all" href="//www.ibm.com/common/v14/screen.css" />
<link rel="stylesheet" type="text/css" media="print" href="//www.ibm.com/common/v14/print.css" />
<script language="JavaScript" src="//www.ibm.com/common/v14/detection.js" type="text/javascript"></script>
<script language="JavaScript" src="/developerworks/js/dropdown.js" type="text/javascript"></script>
<script language="JavaScript" src="/developerworks/email/grabtitle.js" type="text/javascript"></script>
<script language="JavaScript" src="/developerworks/email/emailfriend2.js" type="text/javascript"></script><script language="JavaScript" src="/developerworks/js/urltactic.js" type="text/javascript"></script><script language="JavaScript" type="text/javascript">
 <!--
 setDefaultQuery('opensourceart');
 //-->
</script>
<!--START RESERVED FOR FUTURE USE INCLUDE FILES--><script language="javascript" src="/developerworks/js/ajax1.js" type="text/javascript"></script><script language="javascript" src="/developerworks/js/searchcount.js" type="text/javascript"></script><!--END RESERVED FOR FUTURE USE INCLUDE FILES--><script language="JavaScript" type="text/javascript">var emailAbstract = "Learn how to add a scoring system to the search engine described in 'LDAP search engines, Part 1.' Develop your own metaphone-matching techniques for spelling corrections, query suggestions, and effective display of search results."; </script></head><BR><BR>This is an archived cached-text copy of the developerWorks article.  Please consider viewing the original article at: <a href="http://www-128.ibm.com/developerworks/library/os-ldap2">IBM developerWorks</a><BR><BR><BR><BR><body><!--MASTHEAD_BEGIN--><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr valign="top">
<td class="bbg" width="110"><a href="http://www.ibm.com/"><img alt="IBM&reg;" border="0" height="52" src="//www.ibm.com/i/v14/t/ibm-logo.gif" width="110"/></a></td>
<td class="bbg"><img src="//www.ibm.com/i/c.gif" width="1" height="1" border="0" alt="" /></td>
<td align="right"  class="mbbg" width="650">
<table border="0" cellpadding="0" cellspacing="0" align="right" >
<tr class="cty-tou">
<td rowspan="2" width="17" class="upper-masthead-corner"><a href="#main"><img src="//www.ibm.com/i/c.gif" border="0" width="1" height="1" alt="Skip to main content"/></a></td>
<td align="left">
<table border="0" cellpadding="0" cellspacing="0" align="left">
<tr>
<td><span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;</span><b class="country">Country/region</b><span class="spacer">&nbsp;[</span><a class="ur-link" href="http://www.ibm.com/developerworks/country/">select</a><span class="spacer">]</span></td>
<td width="29" class="upper-masthead-divider">&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td align="left"><a class="ur-link" href="http://www.ibm.com/legal/">Terms of use</a></td>
</tr>
</table>
</td>
<td width="40">&nbsp;</td>
</tr>
<tr>
<td class="cty-tou-border" height="1" colspan="2"><img src="//www.ibm.com/i/c.gif" alt="" height="1" width="1"/></td>
</tr>
<tr>
<td colspan="3"><img alt="" height="8" src="//www.ibm.com/i/c.gif" width="1"/></td>
</tr>
<tr>
<td>&nbsp;</td>
<td align="center" colspan="2">
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<form method="get" action="//www.ibm.com/developerworks/search/searchResults.jsp" id="form1" name="form1"><input type="hidden" name="searchType" value="1"/><input type="hidden" name="searchSite" value="dW"/>
<td width="18"><label for="q"><img src="//www.ibm.com/i/c.gif" width="1" height="1" alt="Search in:"/></label></td>
<td align="right"><select id="sq" name="searchScope" class="input-local" size="1">
<label for="sq"><option value="dW" selected>All of dW</option>
<option value="dW">-----------------</option>
<option value="aixunix">&nbsp;&nbsp;AIX and UNIX</option>
<option value="eserver">&nbsp;&nbsp;IBM Systems</option>
<option value="db2">&nbsp;&nbsp;Information Mgmt</option>
<option value="lotus">&nbsp;&nbsp;Lotus</option>
<option value="rdd">&nbsp;&nbsp;Rational</option>
<option value="tivoli">&nbsp;&nbsp;Tivoli</option>  
<option value="WSDD">&nbsp;&nbsp;WebSphere</option>
<option value="dW">-----------------</option> 
<option value="archZ">&nbsp;&nbsp;Architecture</option>
<option value="acZ">&nbsp;&nbsp;Autonomic computing</option>
<option value="gridZ">&nbsp;&nbsp;Grid computing</option>
<option value="javaZ">&nbsp;&nbsp;Java technology</option> 
<option value="linuxZ">&nbsp;&nbsp;Linux</option> 
<option value="opensrcZ">&nbsp;&nbsp;Open source</option>
<option value="paZ">&nbsp;&nbsp;Power Architecture</option>
<option value="webservZ">&nbsp;&nbsp;SOA &amp; Web services</option>
<option value="webarchZ">&nbsp;&nbsp;Web development</option>  
<option value="xmlZ">&nbsp;&nbsp;XML</option>
<option value="dW">-----------------</option>
<option value="forums">&nbsp;&nbsp;dW forums</option> 
<option value="dW">-----------------</option>
<option value="aW">alphaWorks</option>
<option value="dW">-----------------</option>
<option value="all">All of IBM</option>
</label></select></td>
<td width="7" align="right"><label for="q"><img src="//www.ibm.com/i/c.gif" width="1" height="1" alt="Search for:"/></label>&nbsp;&nbsp;</td>
<td align="right"><input class="input" id="q" maxlength="100" name="query" size="15" type="text" value=""/>
</td>
<td width="7">&nbsp;
</td>
<td width="90"><input alt="Search" name="Search" src="//www.ibm.com/i/v14/t/search.gif" type="image" value="Search" /></td>
<!-- <td width="20">&nbsp;</td> -->
</form>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="blbg" colspan="3">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td>
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td><span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
<td><a class="masthead-mainlink" href="http://www.ibm.com/">Home</a></td>
<td class="masthead-divider" width="27">&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a class="masthead-mainlink" href="http://www.ibm.com/products/">Products</a></td>
<td class="masthead-divider" width="27">&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a class="masthead-mainlink" href="http://www.ibm.com/servicessolutions/">Services &amp; industry solutions</a></td>
<td class="masthead-divider" width="27">&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a class="masthead-mainlink" href="http://www.ibm.com/support/">Support &amp; downloads</a></td>
<td class="masthead-divider" width="27">&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a class="masthead-mainlink" href="http://www.ibm.com/account/">My IBM</a></td>
<td><span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>

<script src="//www.ibm.com/common/v14/pmh.js" language="JavaScript" type="text/javascript"></script><!--MASTHEAD_END--><!-- CMA ID for this content is: 202089 --> <table id="v14-body-table" border="0" cellpadding="0" cellspacing="0" width="100%"><tr valign="top"><!--LEFTNAV_BEGIN--><td id="navigation" width="150"><table width="150" cellspacing="0" cellpadding="0" border="0"><tr><td class="left-nav-spacer"><a href="http://www.ibm.com/developerworks" class="left-nav-overview">Â </a></td></tr></table><table width="150" cellspacing="0" cellpadding="0" border="0"><tr><td colspan="2" class="left-nav-overview"><a href="http://www.ibm.com/developerworks" class="left-nav-overview">developerWorks</a></td></tr></table><table width="150" cellspacing="0" cellpadding="0" border="0"><tr><td colspan="2" class="left-nav"><a class="left-nav" href="http://www.ibm.com/developerworks/views/opensource/libraryview.jsp?search_by=LDAP+search+engines">More in this series:</a><br /><a class="left-nav-child" href="http://www.ibm.com/developerworks/views/opensource/libraryview.jsp?search_by=LDAP+search+engines">LDAP search engines</a></td></tr><tr><td class="dw-left-nav-separator" width="14"><img alt="" height="6" width="14" src="//www.ibm.com/i/c.gif"/></td><td class="dw-left-nav-separator" width="136"><img alt="" height="6" width="136" src="//www.ibm.com/i/c.gif"/></td></tr><tr><td colspan="2" class="left-nav-highlight"><a href="#" class="left-nav">In this article:</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#N10064" class="left-nav-child">Requirements</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#N1007C" class="left-nav-child">Scoring the search results</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#N100A7" class="left-nav-child">Modifying the code</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#N1016A" class="left-nav-child">Smart suggestions using Text-Metaphone</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#N10208" class="left-nav-child">Summary</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#download" class="left-nav-child">Download</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#resources" class="left-nav-child">Resources</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#author" class="left-nav-child">About the author</a></td></tr><tr class="left-nav-child-highlight"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/cl-bullet.gif"/></td><td><a href="#rate" class="left-nav-child">Rate this page</a></td></tr><tr class="left-nav-last"><td width="14"><img class="display-img" alt="" height="1" width="14" src="//www.ibm.com/i/c.gif"/></td><td width="136"><img class="display-img" alt="" height="19" width="136" src="//www.ibm.com/i/v14/t/left-nav-corner.gif"/></td></tr></table><br /><table width="150" cellspacing="0" cellpadding="0" border="0"><tr><td class="related" colspan="2"><b class="related">Related links</b></td></tr><tr class="rlinks"><td><img alt="" height="8" width="2" src="//www.ibm.com/i/v14/t/rl-bullet.gif"/></td><td><a class="rlinks" href="http://www.ibm.com/developerworks/views/opensource/library.jsp">Open source technical library</a></td></tr><!--START RESERVED FOR FUTURE USE INCLUDE FILES--><!-- No content currently --><!--END RESERVED FOR FUTURE USE INCLUDE FILES--><tr><td width="14"><img class="display-img" alt="" height="1" width="14" src="//www.ibm.com/i/c.gif"/></td><td width="136"><img class="display-img" alt="" height="19" width="136" src="//www.ibm.com/i/c.gif"/></td></tr></table><!--START RESERVED FOR FUTURE USE INCLUDE FILES--><!-- Next Steps Area:  Start -->
<!-- Commented out the include call in the dwmaster version of this file to prevent ajax calls
     being made during article previews and testing.  Live site has uncommented copy of this file (jpp) -->
<!-- Call Next Steps Servlet -->
<script language="JavaScript" type="text/javascript">
<!--
/*
 * ajaxInclude makes a call to the url and render the results in the div tag specified in divId
 */
function ajaxInclude(url, divId) { 
 var req = newXMLHttpRequest(); 
 if (req) { 
   req.onreadystatechange = getReadyStateHandler(req, 
	function (result) {  
           var contents = document.getElementById(divId);  
           if (result != null && result.length > 0 && contents != null) {
	     contents.innerHTML = result;  
           }
        }); 
   req.open("GET", url, true);
   req.send("");
 }
}
//-->
</script>

<!-- Display Next Steps Result -->
<div id="nextsteps"></div>

<!-- Initiate Next Steps Call -->
<script language="JavaScript" type="text/javascript">
<!-- 
 ajaxInclude("/developerworks/niagara/jsp/getNiagaraContent.jsp?url="+window.location.href,"nextsteps");
//-->
</script>
<!-- Next Steps Area:  End --><!--END RESERVED FOR FUTURE USE INCLUDE FILES--></td><!--LEFTNAV_END--><td width="100%"><table id="content-table" border="0" cellpadding="0" cellspacing="0" width="100%"><tr valign="top"><td width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td><a name="main"><img border="0" alt="skip to main content" height="1" width="592" src="//www.ibm.com/i/c.gif"/></a></td></tr></table><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr valign="top"><td height="18" width="10"><img alt="" height="18" width="10" src="//www.ibm.com/i/c.gif"/></td><td width="100%"><img alt="" height="6" width="1" src="//www.ibm.com/i/c.gif"/><br /><a href="http://www.ibm.com/developerworks/" class="bctl">developerWorks</a><span class="bct">Â Â &gt;Â Â </span><a class="bctl" href="http://www.ibm.com/developerworks/opensource/">Open source</a><span class="bct">Â Â &gt;</span><img alt="" height="1" width="1" src="//www.ibm.com/i/c.gif"/><br /><h1><span style="color: #999999">LDAP search engines, Part 2: </span>Adding a scoring system</h1><p id="subtitle"><em>Develop a custom Web-search style engine for your LDAP data</em></p><img alt="" height="6" width="1" src="//www.ibm.com/i/c.gif" class="display-img"/></td><td class="no-print" width="192"><a href="http://www.ibm.com/developerworks/"><img alt="developerWorks" border="0" height="18" width="192" src="/developerworks/i/dw.gif"/></a></td></tr></table></td></tr></table><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr valign="top"><td width="10"><img alt="" height="1" width="10" src="//www.ibm.com/i/c.gif"/></td><td width="100%"><table class="no-print" border="0" width="160" cellspacing="0" cellpadding="0" align="right"><tr><td width="10"><img alt="" height="1" width="10" src="//www.ibm.com/i/c.gif"/></td><td><table width="150" cellspacing="0" cellpadding="0" border="0"><tr><td class="v14-header-1-small">Document options</td></tr></table><table class="v14-gray-table-border" cellspacing="0" cellpadding="0" border="0"><tr><td class="no-padding" width="150"><table width="143" cellspacing="0" cellpadding="0" border="0"><script language="JavaScript" type="text/javascript">
<!--
document.write('<tr valign="top"><td width="8"><img src="//www.ibm.com/i/c.gif" width="8" height="1" alt=""/></td><td width="16"><img alt="Set printer orientation to landscape mode" height="16" src="//www.ibm.com/i/v14/icons/printer.gif" width="16" vspace="3" /></td><td width="122"><p><b><a class="smallplainlink" href="javascript:print()">Print this page</a></b></p></td></tr>');
//-->
</script>
<noscript></noscript><script language="JavaScript" type="text/javascript">
<!-- 5.6 10/24 llk: added cdata around the subdirectory path of email gif-->
<!--
document.write('<tr valign="top"><td width="8"><img src="//www.ibm.com/i/c.gif" width="8" height="1" alt=""/></td><td width="16"><img src="//www.ibm.com/i/v14/icons/em.gif" height="16" width="16" vspace="3" alt="Email this page" /></td><td width="122"><p><a class="smallplainlink" href="javascript:void newWindow()"><b>E-mail this page</b></a></p></td></tr>');
//-->
</script><noscript><tr valign="top"><td width="8"><img alt="" height="1" width="8" src="//www.ibm.com/i/c.gif"/></td><td width="16"><img alt="" width="16" height="16" src="//www.ibm.com/i/c.gif"/></td><td class="small" width="122"><p><span class="ast">Document options requiring JavaScript are not displayed</span></p></td></tr></noscript><tr valign="top"><td width="8"><img alt="" height="1" width="8" src="//www.ibm.com/i/c.gif"/></td><td width="16"><img alt="" vspace="3" border="0" width="16" height="16" src="//www.ibm.com/i/v14/icons/dn.gif"/></td><td width="122"><p><a href="#download" class="smallplainlink"><b>Sample code</b></a></p></td></tr></table></td></tr></table><!--START RESERVED FOR FUTURE USE INCLUDE FILES--><!-- 11/28/07 refreshed by gem, per MOC --> 

<!--<br /><table border="0" cellpadding="0" cellspacing="0" width="150"><tr><td class="v14-header-2-small">New forum features</td></tr></table><table border="0" cellpadding="0" cellspacing="0" class="v14-gray-table-border"><tr><td width="150" class="no-padding"><table border="0" cellpadding="0" cellspacing="0" width="143"><tr valign="top"><td width="8"><img src="//www.ibm.com/i/c.gif" width="8" height="1" alt=""/></td><td><img src="//www.ibm.com/i/v14/icons/fw_bold.gif" height="16" width="16" border="0" vspace="3" alt=""/></td><td width="125"><p><a href="http://www.ibm.com/developerworks/community/forum/?S_TACT=105AGX01&amp;S_CMP=LEAF" class="smallplainlink">Try private messaging, 
read-tracking, and more
</a>
</p></td></tr></table></td></tr></table>--><!--END RESERVED FOR FUTURE USE INCLUDE FILES--><br /><table width="150" cellspacing="0" cellpadding="0" border="0"><tr><td class="v14-header-2-small">Rate this page</td></tr></table><table class="v14-gray-table-border" cellspacing="0" cellpadding="0" border="0"><tr><td class="no-padding" width="150"><table width="143" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td width="8"><img alt="" height="1" width="8" src="//www.ibm.com/i/c.gif"/></td><td><img alt="" vspace="3" border="0" width="16" height="16" src="//www.ibm.com/i/v14/icons/d_bold.gif"/></td><td width="125"><p><a href="#rate" class="smallplainlink"><b>Help us improve this content</b></a></p></td></tr></table></td></tr></table><br /></td></tr></table><p>Level: Intermediate</p><p><a href="#author">Nathan Harrington</a> (<a href="mailto:harrington.nathan@gmail.com?subject=Adding a scoring system">harrington.nathan@gmail.com</a>), Programmer, IBM<br /></p><p> 20 Mar  2007</p><blockquote>Learn how to add a scoring system to the search engine described in <a href="http://www.ibm.com/developerworks/opensource/library/os-ldap1/">Part 1</a> of this "<a href="http://www.ibm.com/developerworks/views/opensource/libraryview.jsp?search_by=LDAP+search+engines">LDAP search engines</a>" series. Develop your own metaphone-matching techniques for spelling corrections, query suggestions, and effective display of search results.</blockquote><!--START RESERVED FOR FUTURE USE INCLUDE FILES--><script language="JavaScript" type="text/javascript">
<!--
if (document.referrer&&document.referrer!="") { 
   // document.write(document.referrer);
   var q = document.referrer;
   var engine = q;
   var isG = engine.search(/google\.com/i);
   var searchTerms;
   //var searchTermsForDisplay;
   if (isG != -1) { 
	   var i = q.search(/q=/);
	   var q2 = q.substring(i+2);
	   var j = q2.search(/&/);
	   j = (j == -1)?q2.length:j;
	   searchTerms = q.substring(i+2,i+2+j);
	   if (searchTerms.length != 0) {
	       searchQuery(searchTerms);
	       document.write("<div id=\"contents\"></div>");
	   }
   } 
}
//-->
</script><!--END RESERVED FOR FUTURE USE INCLUDE FILES-->

<p>Many organizations implement some form of Lightweight Directory Access Protocol (LDAP) service for storing enterprise directory information. Existing search options allow for a range of lookups based on where certain data is stored in the directory. The articles in this series allow you to combine the power of regular expressions with the grep tool to create your own custom LDAP search capability. In the spirit of successful search engines, such as Google, we'll change the search format from a LDAP-style query string to simple and powerful keyword matching and results display.</p>

<p>For a complete introduction to the data architecture strategies and search code referenced here, be sure to read <a href="http://www.ibm.com/developerworks/library/os-ldap1/">Part 1</a> of this series.</p>

<p><a name="N10064"><span class="atitle">Requirements</span></a></p>
<p><a name="N1006A"><span class="smalltitle">Hardware</span></a></p>

<p>Any modern PC manufactured after year 2000 should provide plenty of horsepower for compiling and running the code here. Revisions of this code generate subsecond response times for complex searches with 200 MB or more of information on systems with 500-MHz processors and more than 1 GB of RAM. The components that need to be fast -- grep and Perl -- are very fast, indeed, and the algorithm and display code stays out of the way enough to keep things fast.</p>

<p><a name="N10073"><span class="smalltitle">Software</span></a></p>

<p>For metaphone matching, you'll need to use the Text-Metaphone module by Michael Schwern. Install the module from your favorite CPAN mirror, and you'll be ready to get started.</p>

<br /><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td><img width="100%" src="//www.ibm.com/i/v14/rules/blue_rule.gif" height="1" alt=""/></td></tr></table><table class="no-print" cellspacing="0" cellpadding="0" align="right"><tr align="right"><td><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="middle"><img width="16" src="//www.ibm.com/i/v14/icons/u_bold.gif" height="16" border="0" alt=""/><br /></td><td valign="top" align="right"><a href="#main" class="fbox"><b>Back to top</b></a></td></tr></table></td></tr></table><br /><br /><p><a name="N1007C"><span class="atitle">Scoring the search results</span></a></p>

<p>In <a href="http://www.ibm.com/developerworks/library/os-ldap1/">Part 1</a>, we create a simple print out of results matching the query words specified. Unsorted, this printout provided the basic display required for a useful return of information. Scoring of match results is a complex subject with dozens of brilliant minds working on a variety of relevant problems to increase the quality of search results. The good news is that LDAP search is bounded by a relatively small number of well-defined constraints, and we can use some simple criteria and tuning to deliver highly relevant results with a minimum of program complexity and processing time.</p>

<p><a name="N10089"><span class="smalltitle">Scoring criteria file</span></a></p>

<p>The first step is to define the fields to be scored. The simple approach taken here is to only score fields considered more important than other fields. Consider:</p>

<br /><a name="N10096"><b>Listing 1. Example scoring criteria file</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

name 600
workloc 400
mail 300
jobresponsibilities 50
coverage_state 50
additional 40
</pre></td></tr></table><br />

<p>The name field is given ultimate priority in our score weighting scheme. If a query word is found in the name, we want to give it a very high score, vs. a much lower score when found in the <i>jobresponsibilities</i> field, and no score at all when found in any of the other fields not defined in Listing 1. You'll need to tune these scoring parameters for your data environment. For example, to match primarily on physical address, tune the score weighting definitions to emphasize the physical address field. So even if a match is found in the Person Name field, you can use the appropriate weighting definitions to place the matching physical address records first in the list. For example, if you search on "Orchard," you may be searching for the IBM&#174; corporate address. With an appropriately tuned score weight file, it will place the "IBM Mailing Address" record at "101 Orchard Drive" ahead of individual records like "John Orchard" or "Orchard Industries."</p>

<p>Note how the scores are separated by orders of magnitude and divisions of 10. Use broad spacing in your initial scoring setups to allow maximum flexibility as your scoring criteria changes.</p>

<br /><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td><img width="100%" src="//www.ibm.com/i/v14/rules/blue_rule.gif" height="1" alt=""/></td></tr></table><table class="no-print" cellspacing="0" cellpadding="0" align="right"><tr align="right"><td><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="middle"><img width="16" src="//www.ibm.com/i/v14/icons/u_bold.gif" height="16" border="0" alt=""/><br /></td><td valign="top" align="right"><a href="#main" class="fbox"><b>Back to top</b></a></td></tr></table></td></tr></table><br /><br /><p><a name="N100A7"><span class="atitle">Modifying the code</span></a></p>

<p>With the scoring criteria file in place (fieldWeights), we need to load the various scoring parameters and build our match test subroutines. The Resources section contains a link to the complete code, or follow the modification instructions below as we transmogrify Part 1 into the completed Part 2 program. The first step is to add the required hash to the variable declaration section. Make sure to insert the line <code>my %fieldWeights = ();</code> at the beginning of the variable declaration section. Then use the following subroutine to load the field weights into memory.</p>

<br /><a name="N100B8"><b>Listing 2. loadMainFieldWeight subroutine</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

sub loadMainFieldWeight{
  open( FLDWT, "fieldWeights") or die "can't open field weights file";
  while( my $line = &lt;FLDWT&gt; )
  {
    my($key, $val ) = split " ", $line;
    $fieldWeights{ $key } = $val;
  }#while field weights file
}#loadTwoWordFieldWeight
</pre></td></tr></table><br />

<p>After the grep stage, Part 1 printed out the results returned in sequential order. Part 2 injects the <code>scoreSortResults</code> subroutine into the main program logic to score each matched record, sort the resulting list, and pass it on to the display step.</p>

<br /><a name="N100C9"><b>Listing 3. scoreSortResults subroutine</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

sub scoreSortResults
{
  my @scored = ();

  for my $oneRec ( @_ )
  {
    chomp($oneRec);
    my @delRecs = split "##", $oneRec;
    shift(@delRecs); # first field is empty
    my $localScore = 0;

    for my $fld ( @delRecs  )
    { 
      $localScore += match( "contains", $fld );
      $localScore += match( "isExact",  $fld );
    }#for each field in the linex

    push @scored, "$localScore" . "$oneRec";
  }#for each line 

  my @idx = (); #temporary index for sorting
  for( @scored ){
    # create an index of scores
    my $item =  substr($_,0,index($_,'##'));
    push @idx, $item;
  }

  # sort the index of scores
  my @sorted = @scored[ sort { $idx[$b] &lt;=&gt; $idx[$a] } 0 .. $#idx ];

  return( @sorted );
}#scoreResults
</pre></td></tr></table><br />

<p>The main <code>for</code> loop iterates over every record that matched from the flat file. For each of these newline-delimited records, the fields are extracted and checked for a match with any of the query words. The separate check for a <code>contains</code> match and an <code>isExact</code> match effectively doubles the score for a precise match of a word. This was the first simple yet moderately robust method I came upon to deliver reliable results that differentiate "John" from "Johnny" in a useful way. With the score of a record inserted at the beginning of the record line, the loop repeats.</p>

<p>When every record that matched from the flat file has been scored, the sorting process is set up. The first step is to isolate the actual score by selecting the first record in the <code>##</code>-delimited list. With the index array of scores created, we use the standard sort command as described in section 4 of the perlfaq to create the <code>@sorted</code> array of ordered search results.</p>

<p>Let's go back and flesh out the <code>match</code> subroutine:</p>

<br /><a name="N100F4"><b>Listing 4. match subroutine</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

sub match
{
  my $matchType = $_[0];
  my $input = $_[1];
  my( $field, $value ) = split ':', $input;
  my $retScore = 0;

  for my $qPiece ( @queryWords )
  {
    if( $matchType eq "contains" )
    { 
      if( $value =~ /($qPiece)/i )
      { 
        next unless exists($fieldWeights{$field});
        $retScore .= $fieldWeights{$field};
      }#if word match found
    }#if contains

    else
    { 
      if( $value =~ /(\($qPiece\))/i   ||   $value =~ /(\b$qPiece\b)/i  )
      { 
        next unless exists($fieldWeights{$field});
        $retScore .= $fieldWeights{$field};
      }#if exact word match found
    }#if isexact

  }#for each query word
  return($retScore);
}#match
</pre></td></tr></table><br />

<p>For each word specified in the query, check for results that contain the word and results that are exact matches for the word. One particular modification for the LDAP data is to consider <code>'('</code> and <code>')'</code> as word boundary indicators. This will help match entries such as  "smith,dave" and "smith, david (dave)."</p>

<p>For easy tuning with your particular data set, consider modifying the <code>scoreSortResults</code> subroutine to only accept exact matches.</p>

<p>With the simple scoring procedures in place and a sorted array of result text, we can print the results. We'll need to modify the <code>buildHashPrintResults</code> subroutine to store the <code>print</code> output in a variable. We'll use this for some simple results checking later on. Add the line <code>my $outStr = "";</code> to the main program variable declaration section. Change the print lines in the <code>buildHashPrintResults</code> subroutine from those in Listing 5 to what those in Listing 6.</p>

<br /><a name="N10127"><b>Listing 5. Part 1 buildHashPrintResults print statments</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

my @delRecs = split "##", $oneRec;
...
print getSelectedFields();
%fieldHash = ();
</pre></td></tr></table><br />

<br /><a name="N10135"><b>Listing 6. Part 2 buildHashPrintResults print statments</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

my @delRecs = split "##", $oneRec;
$outStr .= "Score: $delRecs[0]\n";
...
$outStr .= getSelectedFields();
%fieldHash = ();
</pre></td></tr></table><br />

<p>All that remains to complete the scoring code upgrade is to modify the main program logic flow from Listing 7 to Listing 8.</p>

<br /><a name="N10146"><b>Listing 7. Part 1 main program logic</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

@queryWords = split " ", $searchQuery;
  
buildHashPrintResults( alg_N_Word( @queryWords ) );
</pre></td></tr></table><br />

<br /><a name="N10150"><b>Listing 8. Part 2 main program logic</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

@queryWords = split " ", $searchQuery;

loadMainFieldWeight();

buildHashPrintResults
( 
  scoreSortResults
  ( 
    alg_N_Word( @queryWords )
  )
);

print "$outStr";
</pre></td></tr></table><br />

<p>Go ahead and give it a try with your previous data set. For my example data set, if I do a query like <code>perl cmdSearch.pl devel chri</code>, I would get a result like that shown in Listing 9. Note how the first record has a higher score because "chris" matches in the mail field, as well as the name field.</p>

<br /><a name="N10161"><b>Listing 9. Scored query results</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

Score: 950
mail:  nchristo@us.ibm.com
telephonenumber:  1-522-223-2214
physicaldeliveryofficename:  1P-027
co:  USA
cn:  Christopher Q Public 
buildingname:  007
jobresponsibilities:  Senior Software Engineer, \
IBM Developer Skills Program, developerWorks
givenname:  Christopher,  Chris,  Kris,  Christian,  Christine,  Cristiane
primaryuserid:  NCHRIS
name:  Public, Christopher

Score: 650
mail:  crothemooi@us.ibm.com
telephonenumber:  1-822-223-2215
physicaldeliveryofficename:  HOME
co:  USA
cn:  Christine D. Public
buildingname:  311
jobresponsibilities:  developerWorks WebSphere Editor: Wireless, Web Services, Voice
givenname:  Christine D.,  Christine,  Chris,  Kris,  Christian,  Christopher,  Cristiane
name:  Public, Christine D. (Chris)
preferredfirstname:  Christine
</pre></td></tr></table><br />

<p>You now have in place a fully functional, weighted-scoring, free-form query search engine. Although tailored to LDAP-type data, you can use the code above for any number of text-related queries. Keep in mind as you tune your search engine that major modifications to the performance and results of the algorithms can be acquired by modifying just a few sections of the code. For example, if you remove the ability of a query word to match more than once, or more than once in the same field, the distribution of the scores within a record will change dramatically. </p>

<br /><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td><img width="100%" src="//www.ibm.com/i/v14/rules/blue_rule.gif" height="1" alt=""/></td></tr></table><table class="no-print" cellspacing="0" cellpadding="0" align="right"><tr align="right"><td><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="middle"><img width="16" src="//www.ibm.com/i/v14/icons/u_bold.gif" height="16" border="0" alt=""/><br /></td><td valign="top" align="right"><a href="#main" class="fbox"><b>Back to top</b></a></td></tr></table></td></tr></table><br /><br /><p><a name="N1016A"><span class="atitle">Smart suggestions using Text-Metaphone</span></a></p>

<p>Metaphone matching is an algorithmic method for generating keys based on the phonetic pronunciation of words. For example, the metaphone for "developerWorks" is "TFLPRWRKS." The same metaphone is generated for <i>devoloperworks, devaloperworks, devaloperwerks</i>, etc. Used in a wide variety of spelling checker and suggestion-making programs, we'll use a simple version of the metaphone-matching approach to provide some useful suggestions based on our particular data.</p>

<p><a name="N10176"><span class="smalltitle">Building the metaphone database</span></a></p>

<p>The approach used in this article is to extract all of the individual words from a specified field in the entire flat-file database. A frequency count is then created for each of these words, along with their associated metaphone keys. Use the program buildMetaphones.pl in Listing 10 to create your own metaphone databases.</p>

<br /><a name="N10183"><b>Listing 10. buildMetaphones.pl script</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

#!/usr/bin/perl -w
use strict;
use Text::Metaphone;

if( @ARGV != 1 ){ die "specify a fieldname" };

my $selectField = $ARGV[0];
my %metaPhones;

# build the metaphone frequency counts
while( my $line = &lt;STDIN&gt;){
  my @allRecs = split '##', $line;
  shift( @allRecs ); #first on is empty

  for my $entry ( @allRecs )
  {
    next unless $entry =~ /\:/;
    my( $field, $value ) = split ':', $entry;
    next unless $field =~ $selectField;

    # remove characters that inhibit space delimiting
    $value =~ s/\W/ /g;

    for my $word ( split ' ', lc($value) )
    { 
      $metaPhones{ Metaphone($word) }{ $word }++;
    }
  }#for each field entry
}#while input

# now print them out
for my $metaKey( keys %metaPhones )
{
  print "$metaKey##";

  # build a sorted list of actual word counts associated with a metaphone
  my @countKeys = sort
  {
    $metaPhones{$metaKey}{$b} &lt;=&gt; $metaPhones{$metaKey}{$a}
  } keys %{ $metaPhones{$metaKey} };

  for my $sortKey ( @countKeys )
  {
    print "$sortKey $metaPhones{$metaKey}{$sortKey}##";
  }

  print "\n";
}#for metakey
</pre></td></tr></table><br />

<p>Run the script with the command <code>cat &lt;data_file&gt; | perl buildMetaphones.pl name &gt; metaphones.name</code>, and it will produce output like that shown in Listing 11. The <code>data_file </code> entry should be your newline-delimited flat file generated from your LDAP data extract as described in Part 1.</p>

<br /><a name="N10198"><b>Listing 11. Example metaphones.name file</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

XKR##shekerow 1##
JLBR0##gilbreath 1##
JM##jim 103##
MKKMN##mccommon 12##
MRKN##morgan 33##
TNS##denise 3##
JKFLF##jakovlev 1##
JN##john 18##jeanne 12##jenni 10##jon 1##
</pre></td></tr></table><br />

<p>You also want to create a <code>metaphones.jobresponsibilities</code> file with the command <code>cat &lt;data_file&gt; | perl buildMetaphones.pl jobresponsibilities &gt; metaphones.jobresponsibilities</code>.</p>

<p>To use these files, we'll need to update the cmdSearch.pl code with the loading subroutine.</p>

<br /><a name="N101B0"><b>Listing 12. loadMetaphones subroutine</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

sub loadMetaPhones{

  open( FH, "metaphones.name" ) or \
  die "can't load name metaphones";
    while(&lt;FH&gt;){
      my( $key, $val ) =split '##';
      $nameMP{$key} = $val;
    }#while FH
  close(FH);

  open( FH, "metaphones.jobresponsibilities" ) or \
  die "can't load jobresponsibilities metaphones";
    while(&lt;FH&gt;){
      my( $key, $val ) = split '##';
      $jobMP{$key} = $val;
    }#while FH
  close(FH);

}#loadMetaPhones
</pre></td></tr></table><br />

<p>The <code>loadMetaPhones</code> subroutine is straightforward code that creates two hashes of metaphone keys and values. In our example, a 1-frequency of metaphone match in the <code>name</code> field is considered more desirable than a 50-frequency match in the <code>jobresponsibilities</code> field. Instead of creating another scoring system to take this into account, the code will simply search for a <code>name</code> metaphone match first, then move on to the <code>jobresponsibilities</code> metaphones if none is available. The actual code to make the metaphone matches takes place in the <code>getMetaphoneMatch</code> subroutine:</p>

<br /><a name="N101D5"><b>Listing 13. getMetaphonematch subroutine</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

sub getMetaphoneMatch{
  my $retStr = "";
  my @notFound = ();
  #HRNKTN ##harrington 41##herrington 4 - metaphone file format

  for my $qPiece ( @_ )
  {
    my $word = $qPiece;
    my $phone = Metaphone($word);
    my @mParts = ();

    if( exists($nameMP{$phone}) )
    { 
      @mParts = split '##', $nameMP{$phone};
    }
    elsif( exists($jobMP{$phone}) )
    { 
      @mParts = split '##', $jobMP{$phone};
    }

    next unless @mParts ne "";

    # print the most common match only
    for my $metaWord ( @mParts )
    { 
      if( $metaWord !~ /$qPiece/i )
      { 
        $retStr .= "$metaWord, ";
        last;
      }
    }#for metaword check
  }#for each query word

  return($retStr);
}#getMetaphoneMatch
</pre></td></tr></table><br />

<p>After the local variable declaration, the subroutine will make a pass through every query word specified searching for a metaphone match in the name or <code>jobresponsibilities</code> hashes. If a metaphone match has been found, just the first matched word with the appropriate metaphone is selected for printing. For example, a query for "Horington" has a metaphone of "HRNKTN" and will print a suggestion for "Harrington," even though "Herrington," "Herringdon," and others may be metaphone matches. If none of the name metaphones are a match, the job responsibilities metaphones are searched. The choice to print the most common match (as determined in the buildMetaphones.pl script) is based on a desire to give the users a simple level of suggestion. You can print all of the matching metaphones, or even search the database automatically based on the first few characters in the metaphone match. Choose a strategy that works best for your application.</p>

<p>To complete the modifications, add <code>my %jobMP = (); my %nameMP = ();</code> to the variable declaration section and modify the main program logic from Listing 14 to Listing 15.</p>

<br /><a name="N101F1"><b>Listing 14. Previous main program logic</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

@queryWords = split " ", $searchQuery;
loadMainFieldWeight();

buildHashPrintResults
(
  scoreSortResults
  (
    alg_N_Word( @queryWords )
  )
);

print "$outStr";
</pre></td></tr></table><br />

<br /><a name="N101FB"><b>Listing 15. Final Part 2 main program logic</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

@queryWords = split " ", $searchQuery;
loadMainFieldWeight();
loadMetaPhones();

buildHashPrintResults
(
  scoreSortResults
  (
    alg_N_Word( @queryWords )
  )
);

print "$outStr";
if( $outStr eq "" ){ print "Try: ", getMetaphoneMatch( @queryWords ), "\n" }
</pre></td></tr></table><br />

<p>Now run the cmdSearch.pl application with a query that you know is not in the dataset. For example, if you do a search on "jaff devaloperWerks," the cmdSearch.pl program output will be <code>Try: jeff 114, developerworks 50,</code>.</p>

<br /><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td><img width="100%" src="//www.ibm.com/i/v14/rules/blue_rule.gif" height="1" alt=""/></td></tr></table><table class="no-print" cellspacing="0" cellpadding="0" align="right"><tr align="right"><td><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="middle"><img width="16" src="//www.ibm.com/i/v14/icons/u_bold.gif" height="16" border="0" alt=""/><br /></td><td valign="top" align="right"><a href="#main" class="fbox"><b>Back to top</b></a></td></tr></table></td></tr></table><br /><br /><p><a name="N10208"><span class="atitle">Summary</span></a></p>



      <table align="right" border="0" cellspacing="0" cellpadding="0" width="150"><tr><td width="10"><img alt="" height="1" width="10" src="//www.ibm.com/i/c.gif"/></td><td><table border="1" cellspacing="0" cellpadding="5" width="100%"><tr><td bgcolor="#eeeeee">
        <a name="N10211"><b>Share this...</b></a><br />
        <p>
        <table border="0" cellpadding="0" cellspacing="0" width="135"><tr><td colspan="2">
              <img alt="" border="0" height="5" src="http://www.ibm.com/i/c.gif" width="1"/>
            </td></tr><tr align="left" valign="top"><td width="21">

              <a href="http://digg.com/submit?phase=2&amp;url=http://www.ibm.com/developerworks/opensource/library/os-ldap2">
                <img alt="digg" border="0" height="10" src="http://www.ibm.com/i/v14/icons/10x10-digg-thumb.gif" width="10"/>
              </a>
            </td><td>

              <a href="http://digg.com/submit?phase=2&amp;url=http://www.ibm.com/developerworks/grid/library/os-ldap2">Digg this story</a>
            </td></tr><tr><td colspan="2">
              <img alt="" border="0" height="5" src="http://www.ibm.com/i/c.gif" width="1"/>
            </td></tr><tr align="left" valign="top"><td width="21"><a href="http://del.icio.us/post" onClick="window.open('http://del.icio.us/post?v=4&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title), 'delicious','toolbar=no,width=700,height=400'); return false;"><img alt="del.icio.us" border="0" height="10" src="http://del.icio.us/static/img/delicious.small.gif" width="10"/></a>
            </td><td><a href="http://del.icio.us/post" onClick="window.open('http://del.icio.us/post?v=4&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title), 'delicious','toolbar=no,width=700,height=400'); return false;">Post to del.icio.us</a>
            </td></tr><tr><td colspan="2">
              <img alt="" border="0" height="5" src="http://www.ibm.com/i/c.gif" width="1"/>
            </td></tr><tr align="left" valign="top"><td width="21">
              
<a href="javascript:location.href='http://slashdot.org/bookmark.pl?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)"><img alt="Slashdot" border="0" height="16" src="/developerworks/i/slashdot-favicon.gif" width="16"/></a> 

              
            </td><td>
              <a href="javascript:location.href='http://slashdot.org/bookmark.pl?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title)">Slashdot it!</a>
            </td></tr><tr><td colspan="2">
              <img alt="" border="0" height="5" src="http://www.ibm.com/i/c.gif" width="1"/>
            </td></tr></table>
        </p>
      </td></tr></table></td></tr></table>



<p>With the LDAP search engine described above, complete with effective scoring and simple search suggestions, you have many options for integration within the enterprise. One typical approach is to migrate the interface to a HTML-generating environment and allow users to search your LDAP database just like they would the rest of the Internet. You can create a Service-Oriented Architecture (SOA) application programming interface (API) for integration with other applications, including suggestion support to give your various applications smarter people lookups.</p>

<p>The general algorithms and text-searching approach are portable and easily integrated across the enterprise, as well. Use the metaphone-matching and regular-expression generator to create a suggestion link based on 404 hits to your Web site. Insert a call to the Aspell or Ispell API for another avenue of search query suggestion, or replace the metaphone matching with the best modern soundex for your application.</p>

<br /><br /><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td><img width="100%" src="//www.ibm.com/i/v14/rules/blue_rule.gif" height="1" alt=""/></td></tr></table><table class="no-print" cellspacing="0" cellpadding="0" align="right"><tr align="right"><td><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="middle"><img width="16" src="//www.ibm.com/i/v14/icons/u_bold.gif" height="16" border="0" alt=""/><br /></td><td valign="top" align="right"><a href="#main" class="fbox"><b>Back to top</b></a></td></tr></table></td></tr></table><br /><br /><p><span class="atitle"><a name="download">Download</a></span></p><table width="100%" class="data-table-1" cellspacing="0" cellpadding="0" border="0"><tr><th scope="col">Description</th><th scope="col">Name</th><th align="right" scope="col">Size</th><th scope="col">Download method</th></tr><tr><th class="tb-row" scope="row">Source code</th><td nowrap="nowrap">os-ldap2Search.zip</td><td align="right" nowrap="nowrap">2KB</td><td nowrap="nowrap"><a class="fbox" href="http://www.ibm.com/developerworks/views/download.jsp?contentid=202089&amp;filename=os-ldap2Search.zip&amp;method=http&amp;locale=worldwide"><b>HTTP</b></a></td></tr></table><table cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td colspan="5"><img alt="" width="12" height="12" border="0" src="//www.ibm.com/i/c.gif"/></td></tr><tr><td><img alt="" height="16" width="16" src="//www.ibm.com/i/v14/icons/fw.gif"/></td><td><a class="fbox" href="/developerworks/library/whichmethod.html">Information about download methods</a></td><td><img alt="" height="1" width="50" src="//www.ibm.com/i/c.gif"/></td></tr></table><br /><br /><p><a name="resources"><span class="atitle">Resources</span></a></p><b>Learn</b><br /><ul><li>
This article builds on "<a href="http://www.ibm.com/developerworks/library/os-ldap1/">LDAP search engines, Part 1</a>."<br /><br /></li><li>
Check out the <a href="http://LDAP.perl.org/">source</a> of Perl and LDAP.<br /><br /></li><li>
Paul Dwerryhouse wrote an article titled "<a href="http://www.linuxjournal.com/article/7086">An Introduction to perl-ldap</a>" about Perl and LDAP.<br /><br /></li><li>
There's plenty of background and implementation knowledge available at <a href="http://www.openLDAP.org/">OpenLDAP.org</a>.<br /><br /></li><li>
Expand your PHP skills by checking out IBM developerWorks' <a href="http://www.ibm.com/developerworks/opensource/top-projects/php.html">PHP project resources</a>.<br /><br /></li><li>
To listen to interesting interviews and discussions for software developers, check out <a href="http://www.ibm.com/developerworks/podcast/">developerWorks  podcasts</a>.<br /><br /></li><li>
Stay current with developerWorks' <a href="http://www.ibm.com/developerworks/offers/techbriefings/?S_TACT=105AGX03&amp;S_CMP=art">Technical events and webcasts</a>.<br /><br /></li><li>
Check out upcoming conferences, trade shows, webcasts, and other <a href="http://www.ibm.com/developerworks/views/opensource/events.jsp">Events</a> around the world that are of interest to IBM open source developers.<br /><br /></li><li>
Visit the developerWorks <a href="http://www.ibm.com/developerworks/opensource">Open source zone</a> for extensive how-to information, tools, and project updates to help you develop with open source technologies and use them with IBM's products.<br /><br /></li><li>
Visit <a href="http://ibmdw.safaribooksonline.com/">Safari Books Online</a> for a wealth of resources for open source technologies.<br /><br /></li></ul><br /><b>Get products and technologies</b><br /><ul><li>
Grab Michael Schwern's <a href="http://search.cpan.org/~mschwern/Text-Metaphone/">Text-Metaphone</a> module at CPAN.<br /><br /></li><li>
Innovate your next open source development project with <a href="http://www.ibm.com/developerworks/downloads/?S_TACT=105AGX44">IBM trial software</a>, available for download or on DVD.<br /><br /></li></ul><br /><b>Discuss</b><br /><ul><li>
Participate in <a href="http://www.ibm.com/developerworks/blogs">developerWorks blogs</a> and get involved in the developerWorks community.<br /><br /></li><li>
Participate in the developerWorks <a href="http://www.ibm.com/developerworks/forums/dw_forum.jsp?forum=992&amp;cat=51">PHP Developer Forum</a>.</li></ul><br /><br /><p><a name="author"><span class="atitle">About the author</span></a></p><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td colspan="3"><img alt="" width="100%" height="5" src="//www.ibm.com/i/c.gif"/></td></tr><tr align="left" valign="top"><td><p/></td><td><img alt="" width="4" height="5" src="//www.ibm.com/i/c.gif"/></td><td width="100%"><p>Nathan Harrington is a programmer at IBM currently working with Linux and resource-locating technologies.</p></td></tr></table><br /><br /><br /><p class="no-print"><span class="atitle"><a name="rate">Rate this page</a></span></p><span class="no-print"><form action="http://www-128.ibm.com/developerworks/utils/RatingsHandler" method="post"><input value="1" name="SITE_ID" type="hidden"/><input value="LDAP search engines, Part 2: Adding a scoring system" name="ArticleTitle" type="hidden"/><input value="Open source" name="Zone" type="hidden"/><input value="http://www.ibm.com/developerworks/thankyou/feedback-thankyou.html" name="RedirectURL" type="hidden"/><input value="202089" name="ArticleID" type="hidden"/><input value="03202007" name="publish-date" type="hidden"/><input type="hidden" name="author1-email" value="harrington.nathan@gmail.com" /><input type="hidden" name="author1-email-cc" value="" /><script language="javascript" type="text/javascript">document.write('<input type="hidden" name="url" value="'+location.href+'" />');</script><img width="100%" src="//www.ibm.com/i/v14/rules/gray_rule.gif" height="1" alt=""/><br /><table width="100%" class="v14-gray-table-border" cellspacing="0" cellpadding="0" border="0"><tr><td width="100%"><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td colspan="3"><p>Please take a moment to complete this form to help us better serve you.</p></td></tr><tr valign="top"><td width="140"><img width="140" src="//www.ibm.com/i/c.gif" height="1" alt=""/><br /><p><label for="Goal">Did the information help you to achieve your goal?</label></p></td><td width="303"><img width="303" src="//www.ibm.com/i/c.gif" height="6" alt=""/><br /><table width="100%" cellspacing="0" cellpadding="0" border="0"><tr><td><input value="Yes" id="Goal" name="Goal" type="radio"/>Yes</td><td><input value="No" id="Goal" name="Goal" type="radio"/>No</td><td><input value="Don't know" id="Goal" name="Goal" type="radio"/>Don't know</td></tr></table></td><td width="100%">Â </td></tr><tr><td colspan="3"><img alt="" height="12" width="8" src="//www.ibm.com/i/c.gif"/></td></tr><tr valign="top"><td width="140"><img width="140" src="//www.ibm.com/i/c.gif" height="1" alt=""/><br /><p><label for="Comments">Please provide us with comments to help improve this page:</label></p></td><td width="303"><img width="303" src="//www.ibm.com/i/c.gif" height="6" alt=""/><br /><table width="100%" cellspacing="0" cellpadding="0" border="0"><tr><td><textarea class="iform" cols="35" rows="5" wrap="virtual" id="Comments" name="Comments">Â </textarea></td></tr></table></td><td width="100%">Â </td></tr><tr><td colspan="3"><img alt="" height="12" width="8" src="//www.ibm.com/i/c.gif"/></td></tr><tr valign="top"><td width="140"><img width="140" src="//www.ibm.com/i/c.gif" height="1" alt=""/><br /><p><label for="Rating">How useful is the information?</label></p></td><td width="303"><img width="303" src="//www.ibm.com/i/c.gif" height="6" alt=""/><br /><table width="100%" cellspacing="0" cellpadding="0" border="0"><tr><td align="left" width="60"><input value="1" id="Rating" name="Rating" type="radio"/>1</td><td align="left" width="60"><input value="2" id="Rating" name="Rating" type="radio"/>2</td><td align="left" width="60"><input value="3" id="Rating" name="Rating" type="radio"/>3</td><td align="left" width="60"><input value="4" id="Rating" name="Rating" type="radio"/>4</td><td align="left" width="63"><input value="5" id="Rating" name="Rating" type="radio"/>5</td></tr><tr><td align="left" width="60"><span class="greytext">Not</span><br /><span class="greytext">useful</span></td><td align="left" width="60"><img src="//www.ibm.com/i/c.gif" height="1" width="1" alt=""/></td><td align="left" width="60"><img src="//www.ibm.com/i/c.gif" height="1" width="1" alt=""/></td><td align="left" width="60"><img src="//www.ibm.com/i/c.gif" height="1" width="1" alt=""/></td><td align="left" width="63"><span class="greytext">Extremely<br />useful</span></td></tr></table></td><td width="100%">Â </td></tr></table></td></tr></table><table class="v14-gray-table-border" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td colspan="3"><img alt="" height="8" width="8" src="//www.ibm.com/i/c.gif"/></td></tr><tr><td width="8"><img alt="" height="1" width="8" src="//www.ibm.com/i/c.gif"/></td><td colspan="3"><input alt="Submit" height="21" width="120" border="0" src="//www.ibm.com/i/v14/buttons/submit.gif" type="image"/></td></tr><tr><td colspan="3"><img alt="" height="8" width="8" src="//www.ibm.com/i/c.gif"/></td></tr></table></form><br /></span><span class="no-print"><table cellspacing="0" cellpadding="0" align="right"><tr align="right"><td><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="middle"><img width="16" src="//www.ibm.com/i/v14/icons/u_bold.gif" height="16" border="0" alt=""/><br /></td><td valign="top" align="right"><a href="#main" class="fbox"><b>Back to top</b></a></td></tr></table></td></tr></table><br /><br /></span></td><td width="10"><img alt="" height="1" width="10" src="//www.ibm.com/i/c.gif"/></td></tr></table></td></tr></table><!--FOOTER_BEGIN--><br />
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td class="bbg" height="19">
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td><span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;</span><a class="mainlink" href="http://www.ibm.com/ibm/">About IBM</a></td>
<td class="footer-divider" width="27">&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a class="mainlink" href="http://www.ibm.com/privacy/">Privacy</a></td>
<td class="footer-divider" width="27">&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a class="mainlink" href="http://www.ibm.com/contact/">Contact</a></td>
</tr>
</table>
</td>
</tr>
</table>

<script type="text/javascript" language="JavaScript1.2" src="//www.ibm.com/common/stats/stats.js"></script>
<noscript><img src="//stats.www.ibm.com/rc/images/uc.GIF?R=noscript" width="1" height="1" alt="" border="0" /></noscript><!--FOOTER_END--><!--XSLT stylesheet used to transform this file:  dw-document-html-5.8.xsl--></body></html>